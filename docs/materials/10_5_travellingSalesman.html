<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-4a990d8dcb58f517c7c86712b8f2ac7c.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.31">

  <meta name="author" content="CS 101 - Spring 2026">
  <title>CMPSC101 Spring 2026 :: DataStructures ‚Äì The Travelling Salesman Problem</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-f563837468303362081e247dddd440d0.css">
  <link rel="stylesheet" href="custom_big_o.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">The Travelling Salesman Problem</h1>
  <p class="subtitle">The Ultimate Route Planning Challenge - When Efficiency Meets Real World!</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
CS 101 - Spring 2026 
</div>
</div>
</div>

</section>
<section id="what-is-the-travelling-salesman-problem" class="slide level2">
<h2>What is the Travelling Salesman Problem?</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>The Ultimate Route Challenge üó∫Ô∏è</strong></p>
</div>
<div class="callout-content">
<p><strong>The Problem</strong>: A salesperson needs to visit every city exactly once and return home, using the <strong>shortest possible route</strong>.</p>
<p><strong>Real-World Analogy</strong>: * Like a <strong>delivery driver</strong> planning the most efficient route * <strong>GPS apps</strong> finding the fastest path through multiple stops * <strong>Amazon trucks</strong> optimizing deliveries to save time and fuel * <strong>Tour guides</strong> planning the best sightseeing route</p>
</div>
</div>
</div>
<div class="columns">
<div class="column">
<p><strong>Why It Matters</strong> üöö</p>
<ul>
<li><strong>Delivery Services</strong>: UPS saves millions by optimizing routes</li>
<li><strong>Circuit Board Manufacturing</strong>: Drilling holes efficiently</li>
<li><strong>DNA Sequencing</strong>: Finding optimal gene arrangements</li>
<li><strong>School Bus Routes</strong>: Getting kids to school faster</li>
</ul>
</div><div class="column">
<p><strong>The Challenge</strong> ‚ö°</p>
<ul>
<li>Seems simple with 3-4 cities</li>
<li>Gets <strong>impossibly hard</strong> very quickly</li>
<li>With just 10 cities: <strong>3,628,800</strong> possible routes!</li>
<li>With 20 cities: More routes than atoms in the universe!</li>
</ul>
<p><strong>Key Question</strong>: <em>‚ÄúHow do we find the best route without checking every possibility?‚Äù</em></p>
</div></div>
</section>
<section id="interactive-tsp-demo-plan-your-route" class="slide level2">
<h2>Interactive TSP Demo: Plan Your Route!</h2>
<!-- ::: {.callout-note icon="true"}
## Try It Yourself! üéÆ

Click on the map to add cities, then see how many possible routes there are. Watch the complexity explode!

::: -->
<div id="tsp-demo" style="text-align: center; margin: 20px 0;">
    <h3>üó∫Ô∏è Interactive Travelling Salesman Demo: Click on the map to add cities, then see how many possible routes there are. Watch the complexity explode!
</h3>
    <div style="margin: 15px 0;">
        <button id="add-city-btn" style="padding: 10px 20px; margin: 5px; background: #27AE60; color: white; border: none; border-radius: 4px;">Add Random City</button>
        <button id="solve-tsp-btn" style="padding: 10px 20px; margin: 5px; background: #E74C3C; color: white; border: none; border-radius: 4px;">Find Best Route!</button>
        <button id="reset-tsp-btn" style="padding: 10px 20px; margin: 5px; background: #95A5A6; color: white; border: none; border-radius: 4px;">Reset Cities</button>
        <button id="demo-preset-btn" style="padding: 10px 20px; margin: 5px; background: #3498DB; color: white; border: none; border-radius: 4px;">Load Demo Cities</button>
    </div>
    <div id="tsp-canvas-container" style="border: 2px solid #3498DB; border-radius: 10px; margin: 10px auto; position: relative; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
        <canvas id="tsp-canvas" width="800" height="400" style="border: none; border-radius: 8px; cursor: crosshair;"></canvas>
    </div>
    <div id="tsp-info" style="margin: 15px 0; font-family: monospace; font-size: 16px; background: #f8f9fa; padding: 15px; border-radius: 8px;">
        <div><strong>Cities:</strong> <span id="city-count">0</span></div>
        <div><strong>Possible Routes:</strong> <span id="route-count">0</span></div>
        <div><strong>Best Route Distance:</strong> <span id="best-distance">Click "Find Best Route!" to calculate</span></div>
        <div><strong>Computation Time:</strong> <span id="computation-time">-</span></div>
        <div style="margin-top: 10px; color: #E74C3C;"><strong>‚ö†Ô∏è Complexity:</strong> <span id="complexity-warning">Add cities to see the challenge!</span></div>
    </div>
    <div style="margin: 10px 0; font-size: 14px; color: #7f8c8d;">
        üí° <strong>Tip:</strong> Click anywhere on the map to add cities at exact locations, or use "Add Random City" for quick setup!
    </div>
    <div style="margin: 5px 0; font-size: 12px; color: #95a5a6;">
        üéØ <strong>Interactive Mode:</strong> Click on the canvas to place cities exactly where you want them!
    </div>
</div>
</section>
<section id="the-mathematics-behind-the-factorial-explosion" class="slide level2">
<h2>The Mathematics Behind The Factorial Explosion! üìà</h2>
<div class="callout callout-none callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p><strong>For n cities, there are (n-1)!/2 unique routes to check</strong> Why? We fix the starting city and divide by 2 since routes can go clockwise or counterclockwise.</p>
</div>
</div>
</div>
<p><strong>Route Count Growth</strong> üìä</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a></a><span class="kw">def</span> calculate_routes(n_cities):</span>
<span id="cb1-2"><a></a>    <span class="co">"""Calculate number of TSP routes"""</span></span>
<span id="cb1-3"><a></a>    <span class="cf">if</span> n_cities <span class="op">&lt;=</span> <span class="dv">1</span>:</span>
<span id="cb1-4"><a></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb1-5"><a></a>    </span>
<span id="cb1-6"><a></a>    <span class="co"># (n-1)! / 2 unique routes</span></span>
<span id="cb1-7"><a></a>    factorial <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb1-8"><a></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n_cities):</span>
<span id="cb1-9"><a></a>        factorial <span class="op">*=</span> i</span>
<span id="cb1-10"><a></a>    </span>
<span id="cb1-11"><a></a>    <span class="cf">return</span> factorial <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb1-12"><a></a></span>
<span id="cb1-13"><a></a><span class="co"># Let's see the explosion!</span></span>
<span id="cb1-14"><a></a><span class="cf">for</span> cities <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>, <span class="dv">11</span>):</span>
<span id="cb1-15"><a></a>    routes <span class="op">=</span> calculate_routes(cities)</span>
<span id="cb1-16"><a></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>cities<span class="sc">}</span><span class="ss"> cities: </span><span class="sc">{</span>routes<span class="sc">:,}</span><span class="ss"> routes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="columns">
<div class="column">
<p><strong>Real Numbers:</strong></p>
<ul>
<li>3 cities ‚Üí 1 route, 4 cities ‚Üí 3 routes<br>
</li>
<li>5 cities ‚Üí 12 routes, 10 cities ‚Üí 181,440 routes</li>
<li>15 cities ‚Üí 43,589,145,600 routes!</li>
</ul>
</div><div class="column">
<p><strong>The Pattern:</strong></p>
<ul>
<li>Each new city <strong>multiplies</strong> the complexity</li>
<li>Not addition - <strong>factorial growth</strong>!</li>
<li>This is why TSP is so challenging</li>
<li>Real-world problems have 100+ cities!</li>
</ul>
</div></div>
</section>
<section id="time-complexity-when-mathematics-meets-reality" class="slide level2">
<h2>Time Complexity: When Mathematics Meets Reality ‚è±Ô∏è</h2>
<!-- ::: {.callout icon="false"} -->
<p>‚ö†Ô∏è The Scary Truth About Computation Time</p>
<p>Even with the world‚Äôs fastest computers, brute force TSP becomes impossible very quickly!</p>
<!-- ::: -->
<p><strong>Time Complexity Analysis</strong> ‚è±Ô∏è</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a></a><span class="im">import</span> time</span>
<span id="cb2-2"><a></a><span class="im">import</span> math</span>
<span id="cb2-3"><a></a></span>
<span id="cb2-4"><a></a><span class="kw">def</span> time_estimate(n_cities):</span>
<span id="cb2-5"><a></a>    <span class="co">"""Estimate computation time for brute force TSP"""</span></span>
<span id="cb2-6"><a></a>    routes <span class="op">=</span> math.factorial(n_cities <span class="op">-</span> <span class="dv">1</span>) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb2-7"><a></a>    </span>
<span id="cb2-8"><a></a>    <span class="co"># Assume 1 million routes per second</span></span>
<span id="cb2-9"><a></a>    seconds <span class="op">=</span> routes <span class="op">/</span> <span class="dv">1_000_000</span></span>
<span id="cb2-10"><a></a>    </span>
<span id="cb2-11"><a></a>    <span class="cf">if</span> seconds <span class="op">&lt;</span> <span class="dv">60</span>:</span>
<span id="cb2-12"><a></a>        <span class="cf">return</span> <span class="ss">f"</span><span class="sc">{</span>seconds<span class="sc">:.2f}</span><span class="ss"> seconds"</span></span>
<span id="cb2-13"><a></a>    <span class="cf">elif</span> seconds <span class="op">&lt;</span> <span class="dv">3600</span>:</span>
<span id="cb2-14"><a></a>        <span class="cf">return</span> <span class="ss">f"</span><span class="sc">{</span>seconds<span class="op">/</span><span class="dv">60</span><span class="sc">:.2f}</span><span class="ss"> minutes"</span></span>
<span id="cb2-15"><a></a>    <span class="cf">elif</span> seconds <span class="op">&lt;</span> <span class="dv">86400</span>:</span>
<span id="cb2-16"><a></a>        <span class="cf">return</span> <span class="ss">f"</span><span class="sc">{</span>seconds<span class="op">/</span><span class="dv">3600</span><span class="sc">:.2f}</span><span class="ss"> hours"</span> </span>
<span id="cb2-17"><a></a>    <span class="cf">elif</span> seconds <span class="op">&lt;</span> <span class="dv">31536000</span>:</span>
<span id="cb2-18"><a></a>        <span class="cf">return</span> <span class="ss">f"</span><span class="sc">{</span>seconds<span class="op">/</span><span class="dv">86400</span><span class="sc">:.2f}</span><span class="ss"> days"</span></span>
<span id="cb2-19"><a></a>    <span class="cf">else</span>:</span>
<span id="cb2-20"><a></a>        <span class="cf">return</span> <span class="ss">f"</span><span class="sc">{</span>seconds<span class="op">/</span><span class="dv">31536000</span><span class="sc">:.2f}</span><span class="ss"> years"</span></span>
<span id="cb2-21"><a></a></span>
<span id="cb2-22"><a></a><span class="co"># The scary truth</span></span>
<span id="cb2-23"><a></a><span class="bu">print</span>(<span class="st">"Time to solve TSP by brute force:"</span>)</span>
<span id="cb2-24"><a></a><span class="cf">for</span> n <span class="kw">in</span> [<span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>]:</span>
<span id="cb2-25"><a></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>n<span class="sc">}</span><span class="ss"> cities: </span><span class="sc">{</span>time_estimate(n)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="columns">
<div class="column">
<p><strong>Reality Check</strong> ü§Ø</p>
<ul>
<li><strong>10 cities</strong>: 0.18 seconds</li>
<li><strong>15 cities</strong>: 21.8 days<br>
</li>
<li><strong>20 cities</strong>: 77 billion years</li>
<li><strong>25 cities</strong>: Longer than universe exists!</li>
</ul>
</div><div class="column">
<p><strong>Why This Matters</strong> üí°</p>
<ul>
<li><strong>UPS trucks</strong> visit 100+ stops daily</li>
<li><strong>Amazon deliveries</strong> optimize thousands of routes</li>
<li><strong>GPS systems</strong> need real-time solutions</li>
<li><strong>Need better algorithms</strong> than brute force!</li>
</ul>
</div></div>
</section>
<section id="python-implementation-brute-force-approach" class="slide level2">
<h2>Python Implementation: Brute Force Approach</h2>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>‚ö†Ô∏è Warning: This Gets Slow Fast!</strong></p>
</div>
<div class="callout-content">
<p>Our brute force solution checks every possible route. It works great for small examples, but becomes impossible for real-world problems.</p>
</div>
</div>
</div>
<div class="columns">
<div class="column">
<p><strong>The Core Algorithm</strong> üß†</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a></a><span class="kw">def</span> tsp_brute_force(cities, current_city<span class="op">=</span><span class="dv">0</span>, </span>
<span id="cb3-2"><a></a>                   visited<span class="op">=</span><span class="va">None</span>, path<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb3-3"><a></a>    <span class="co">"""</span></span>
<span id="cb3-4"><a></a><span class="co">    Solve TSP by checking ALL possible routes</span></span>
<span id="cb3-5"><a></a><span class="co">    Time Complexity: O(n!) - FACTORIAL!</span></span>
<span id="cb3-6"><a></a><span class="co">    """</span></span>
<span id="cb3-7"><a></a>    <span class="co"># Initialize first call</span></span>
<span id="cb3-8"><a></a>    <span class="cf">if</span> visited <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb3-9"><a></a>        visited <span class="op">=</span> {current_city}</span>
<span id="cb3-10"><a></a>        path <span class="op">=</span> [current_city]</span>
<span id="cb3-11"><a></a>    </span>
<span id="cb3-12"><a></a>    <span class="co"># Base case: visited all cities, return home</span></span>
<span id="cb3-13"><a></a>    <span class="cf">if</span> <span class="bu">len</span>(visited) <span class="op">==</span> <span class="bu">len</span>(cities):</span>
<span id="cb3-14"><a></a>        complete_path <span class="op">=</span> path <span class="op">+</span> [<span class="dv">0</span>]  <span class="co"># Return to start</span></span>
<span id="cb3-15"><a></a>        total_distance <span class="op">=</span> calculate_distance(complete_path)</span>
<span id="cb3-16"><a></a>        <span class="cf">return</span> complete_path, total_distance</span>
<span id="cb3-17"><a></a>    </span>
<span id="cb3-18"><a></a>    <span class="co"># Try every unvisited city next</span></span>
<span id="cb3-19"><a></a>    best_path <span class="op">=</span> <span class="va">None</span></span>
<span id="cb3-20"><a></a>    best_distance <span class="op">=</span> <span class="bu">float</span>(<span class="st">'inf'</span>)</span>
<span id="cb3-21"><a></a>    </span>
<span id="cb3-22"><a></a>    <span class="cf">for</span> next_city <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(cities)):</span>
<span id="cb3-23"><a></a>        <span class="cf">if</span> next_city <span class="kw">not</span> <span class="kw">in</span> visited:</span>
<span id="cb3-24"><a></a>            <span class="co"># Recursive magic: solve for remaining cities</span></span>
<span id="cb3-25"><a></a>            new_path, distance <span class="op">=</span> tsp_brute_force(</span>
<span id="cb3-26"><a></a>                cities, next_city,</span>
<span id="cb3-27"><a></a>                visited <span class="op">|</span> {next_city},</span>
<span id="cb3-28"><a></a>                path <span class="op">+</span> [next_city]</span>
<span id="cb3-29"><a></a>            )</span>
<span id="cb3-30"><a></a>            </span>
<span id="cb3-31"><a></a>            <span class="co"># Keep the best route found so far</span></span>
<span id="cb3-32"><a></a>            <span class="cf">if</span> distance <span class="op">&lt;</span> best_distance:</span>
<span id="cb3-33"><a></a>                best_distance <span class="op">=</span> distance</span>
<span id="cb3-34"><a></a>                best_path <span class="op">=</span> new_path</span>
<span id="cb3-35"><a></a>    </span>
<span id="cb3-36"><a></a>    <span class="cf">return</span> best_path, best_distance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<p><strong>Distance Calculation</strong> üìê</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a></a><span class="kw">def</span> calculate_distance(path):</span>
<span id="cb4-2"><a></a>    <span class="co">"""Calculate total route distance"""</span></span>
<span id="cb4-3"><a></a>    <span class="co"># Example distance matrix for 4 cities</span></span>
<span id="cb4-4"><a></a>    distances <span class="op">=</span> {</span>
<span id="cb4-5"><a></a>        (<span class="dv">0</span>, <span class="dv">1</span>): <span class="dv">10</span>, (<span class="dv">1</span>, <span class="dv">0</span>): <span class="dv">10</span>,  <span class="co"># City 0 ‚Üî City 1</span></span>
<span id="cb4-6"><a></a>        (<span class="dv">0</span>, <span class="dv">2</span>): <span class="dv">15</span>, (<span class="dv">2</span>, <span class="dv">0</span>): <span class="dv">15</span>,  <span class="co"># City 0 ‚Üî City 2  </span></span>
<span id="cb4-7"><a></a>        (<span class="dv">0</span>, <span class="dv">3</span>): <span class="dv">20</span>, (<span class="dv">3</span>, <span class="dv">0</span>): <span class="dv">20</span>,  <span class="co"># City 0 ‚Üî City 3</span></span>
<span id="cb4-8"><a></a>        (<span class="dv">1</span>, <span class="dv">2</span>): <span class="dv">25</span>, (<span class="dv">2</span>, <span class="dv">1</span>): <span class="dv">25</span>,  <span class="co"># City 1 ‚Üî City 2</span></span>
<span id="cb4-9"><a></a>        (<span class="dv">1</span>, <span class="dv">3</span>): <span class="dv">30</span>, (<span class="dv">3</span>, <span class="dv">1</span>): <span class="dv">30</span>,  <span class="co"># City 1 ‚Üî City 3</span></span>
<span id="cb4-10"><a></a>        (<span class="dv">2</span>, <span class="dv">3</span>): <span class="dv">35</span>, (<span class="dv">3</span>, <span class="dv">2</span>): <span class="dv">35</span>,  <span class="co"># City 2 ‚Üî City 3</span></span>
<span id="cb4-11"><a></a>        <span class="co"># Distance to self is 0</span></span>
<span id="cb4-12"><a></a>        (<span class="dv">0</span>, <span class="dv">0</span>): <span class="dv">0</span>, (<span class="dv">1</span>, <span class="dv">1</span>): <span class="dv">0</span>, (<span class="dv">2</span>, <span class="dv">2</span>): <span class="dv">0</span>, (<span class="dv">3</span>, <span class="dv">3</span>): <span class="dv">0</span></span>
<span id="cb4-13"><a></a>    }</span>
<span id="cb4-14"><a></a>    </span>
<span id="cb4-15"><a></a>    total <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-16"><a></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(path) <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb4-17"><a></a>        current <span class="op">=</span> path[i]</span>
<span id="cb4-18"><a></a>        next_city <span class="op">=</span> path[i <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb4-19"><a></a>        total <span class="op">+=</span> distances.get((current, next_city), <span class="dv">999</span>)</span>
<span id="cb4-20"><a></a>    </span>
<span id="cb4-21"><a></a>    <span class="cf">return</span> total</span>
<span id="cb4-22"><a></a></span>
<span id="cb4-23"><a></a><span class="co"># Real-world: use Euclidean distance</span></span>
<span id="cb4-24"><a></a><span class="kw">def</span> euclidean_distance(city1, city2):</span>
<span id="cb4-25"><a></a>    <span class="co">"""Calculate straight-line distance between cities"""</span></span>
<span id="cb4-26"><a></a>    x1, y1 <span class="op">=</span> city1</span>
<span id="cb4-27"><a></a>    x2, y2 <span class="op">=</span> city2</span>
<span id="cb4-28"><a></a>    <span class="cf">return</span> ((x2 <span class="op">-</span> x1)<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> (y2 <span class="op">-</span> y1)<span class="op">**</span><span class="dv">2</span>)<span class="op">**</span><span class="fl">0.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="build-a-project-from-this-code" class="slide level2">
<h2>Build a Project From This Code?!</h2>
<p>Left to the reader‚Ä¶</p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Copy these blocks into three files (<code>main.py</code>, <code>examples.py</code> and <code>tsp.py</code>) to run this larger demo from the command line. The following slides show each file.</p>
</div>
</div>
</div>
</section>
<section id="project-file-1-tsp.py" class="slide level2">
<h2>Project File 1: tsp.py</h2>
<div class="callout callout-none no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p><strong>tsp.py</strong> - Core TSP solver functions</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a></a><span class="kw">def</span> tsp_brute_force(cities, current_city<span class="op">=</span><span class="dv">0</span>, </span>
<span id="cb5-2"><a></a>                   visited<span class="op">=</span><span class="va">None</span>, path<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb5-3"><a></a>    <span class="co">"""</span></span>
<span id="cb5-4"><a></a><span class="co">    Solve TSP by checking ALL possible routes</span></span>
<span id="cb5-5"><a></a><span class="co">    Time Complexity: O(n!) - FACTORIAL!</span></span>
<span id="cb5-6"><a></a><span class="co">    """</span></span>
<span id="cb5-7"><a></a>    <span class="co"># Initialize first call</span></span>
<span id="cb5-8"><a></a>    <span class="cf">if</span> visited <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb5-9"><a></a>        visited <span class="op">=</span> {current_city}</span>
<span id="cb5-10"><a></a>        path <span class="op">=</span> [current_city]</span>
<span id="cb5-11"><a></a>    </span>
<span id="cb5-12"><a></a>    <span class="co"># Base case: visited all cities, return home</span></span>
<span id="cb5-13"><a></a>    <span class="cf">if</span> <span class="bu">len</span>(visited) <span class="op">==</span> <span class="bu">len</span>(cities):</span>
<span id="cb5-14"><a></a>        complete_path <span class="op">=</span> path <span class="op">+</span> [<span class="dv">0</span>]  <span class="co"># Return to start</span></span>
<span id="cb5-15"><a></a>        total_distance <span class="op">=</span> calculate_distance(complete_path)</span>
<span id="cb5-16"><a></a>        <span class="cf">return</span> complete_path, total_distance</span>
<span id="cb5-17"><a></a>    </span>
<span id="cb5-18"><a></a>    <span class="co"># Try every unvisited city next</span></span>
<span id="cb5-19"><a></a>    best_path <span class="op">=</span> <span class="va">None</span></span>
<span id="cb5-20"><a></a>    best_distance <span class="op">=</span> <span class="bu">float</span>(<span class="st">'inf'</span>)</span>
<span id="cb5-21"><a></a>    </span>
<span id="cb5-22"><a></a>    <span class="cf">for</span> next_city <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(cities)):</span>
<span id="cb5-23"><a></a>        <span class="cf">if</span> next_city <span class="kw">not</span> <span class="kw">in</span> visited:</span>
<span id="cb5-24"><a></a>            <span class="co"># Recursive magic: solve for remaining cities</span></span>
<span id="cb5-25"><a></a>            new_path, distance <span class="op">=</span> tsp_brute_force(</span>
<span id="cb5-26"><a></a>                cities, next_city,</span>
<span id="cb5-27"><a></a>                visited <span class="op">|</span> {next_city},</span>
<span id="cb5-28"><a></a>                path <span class="op">+</span> [next_city]</span>
<span id="cb5-29"><a></a>            )</span>
<span id="cb5-30"><a></a>            </span>
<span id="cb5-31"><a></a>            <span class="co"># Keep the best route found so far</span></span>
<span id="cb5-32"><a></a>            <span class="cf">if</span> distance <span class="op">&lt;</span> best_distance:</span>
<span id="cb5-33"><a></a>                best_distance <span class="op">=</span> distance</span>
<span id="cb5-34"><a></a>                best_path <span class="op">=</span> new_path</span>
<span id="cb5-35"><a></a>    </span>
<span id="cb5-36"><a></a>    <span class="cf">return</span> best_path, best_distance</span>
<span id="cb5-37"><a></a>    </span>
<span id="cb5-38"><a></a><span class="kw">def</span> calculate_distance(path):</span>
<span id="cb5-39"><a></a>    <span class="co">"""Calculate total route distance"""</span></span>
<span id="cb5-40"><a></a>    <span class="co"># Example distance matrix for 4 cities</span></span>
<span id="cb5-41"><a></a>    distances <span class="op">=</span> {</span>
<span id="cb5-42"><a></a>        (<span class="dv">0</span>, <span class="dv">1</span>): <span class="dv">10</span>, (<span class="dv">1</span>, <span class="dv">0</span>): <span class="dv">10</span>,  <span class="co"># City 0 ‚Üî City 1</span></span>
<span id="cb5-43"><a></a>        (<span class="dv">0</span>, <span class="dv">2</span>): <span class="dv">15</span>, (<span class="dv">2</span>, <span class="dv">0</span>): <span class="dv">15</span>,  <span class="co"># City 0 ‚Üî City 2  </span></span>
<span id="cb5-44"><a></a>        (<span class="dv">0</span>, <span class="dv">3</span>): <span class="dv">20</span>, (<span class="dv">3</span>, <span class="dv">0</span>): <span class="dv">20</span>,  <span class="co"># City 0 ‚Üî City 3</span></span>
<span id="cb5-45"><a></a>        (<span class="dv">1</span>, <span class="dv">2</span>): <span class="dv">25</span>, (<span class="dv">2</span>, <span class="dv">1</span>): <span class="dv">25</span>,  <span class="co"># City 1 ‚Üî City 2</span></span>
<span id="cb5-46"><a></a>        (<span class="dv">1</span>, <span class="dv">3</span>): <span class="dv">30</span>, (<span class="dv">3</span>, <span class="dv">1</span>): <span class="dv">30</span>,  <span class="co"># City 1 ‚Üî City 3</span></span>
<span id="cb5-47"><a></a>        (<span class="dv">2</span>, <span class="dv">3</span>): <span class="dv">35</span>, (<span class="dv">3</span>, <span class="dv">2</span>): <span class="dv">35</span>,  <span class="co"># City 2 ‚Üî City 3</span></span>
<span id="cb5-48"><a></a>        <span class="co"># Distance to self is 0</span></span>
<span id="cb5-49"><a></a>        (<span class="dv">0</span>, <span class="dv">0</span>): <span class="dv">0</span>, (<span class="dv">1</span>, <span class="dv">1</span>): <span class="dv">0</span>, (<span class="dv">2</span>, <span class="dv">2</span>): <span class="dv">0</span>, (<span class="dv">3</span>, <span class="dv">3</span>): <span class="dv">0</span></span>
<span id="cb5-50"><a></a>    }</span>
<span id="cb5-51"><a></a>    </span>
<span id="cb5-52"><a></a>    total <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb5-53"><a></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(path) <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb5-54"><a></a>        current <span class="op">=</span> path[i]</span>
<span id="cb5-55"><a></a>        next_city <span class="op">=</span> path[i <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb5-56"><a></a>        total <span class="op">+=</span> distances.get((current, next_city), <span class="dv">999</span>)</span>
<span id="cb5-57"><a></a>    </span>
<span id="cb5-58"><a></a>    <span class="cf">return</span> total</span>
<span id="cb5-59"><a></a></span>
<span id="cb5-60"><a></a><span class="co"># Real-world: use Euclidean distance</span></span>
<span id="cb5-61"><a></a><span class="kw">def</span> euclidean_distance(city1, city2):</span>
<span id="cb5-62"><a></a>    <span class="co">"""Calculate straight-line distance between cities"""</span></span>
<span id="cb5-63"><a></a>    x1, y1 <span class="op">=</span> city1</span>
<span id="cb5-64"><a></a>    x2, y2 <span class="op">=</span> city2</span>
<span id="cb5-65"><a></a>    <span class="cf">return</span> ((x2 <span class="op">-</span> x1)<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> (y2 <span class="op">-</span> y1)<span class="op">**</span><span class="dv">2</span>)<span class="op">**</span><span class="fl">0.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="project-file-2-examples.py" class="slide level2">
<h2>Project File 2: examples.py</h2>
<div class="callout callout-none no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p><strong>examples.py</strong> - Simple usage examples</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a></a><span class="co">#!/usr/bin/env python3</span></span>
<span id="cb6-2"><a></a><span class="co">"""</span></span>
<span id="cb6-3"><a></a><span class="co">Simple usage example for the TSP solver</span></span>
<span id="cb6-4"><a></a><span class="co">Shows how to use the TSP functions directly in your own code</span></span>
<span id="cb6-5"><a></a><span class="co">"""</span></span>
<span id="cb6-6"><a></a></span>
<span id="cb6-7"><a></a><span class="im">from</span> tsp <span class="im">import</span> tsp_brute_force, euclidean_distance</span>
<span id="cb6-8"><a></a><span class="im">import</span> time</span>
<span id="cb6-9"><a></a></span>
<span id="cb6-10"><a></a></span>
<span id="cb6-11"><a></a><span class="kw">def</span> example_usage():</span>
<span id="cb6-12"><a></a>    <span class="co">"""Demonstrate how to use the TSP solver in your own code"""</span></span>
<span id="cb6-13"><a></a>    </span>
<span id="cb6-14"><a></a>    <span class="bu">print</span>(<span class="st">"üîß TSP Solver - Usage Example"</span>)</span>
<span id="cb6-15"><a></a>    <span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">40</span>)</span>
<span id="cb6-16"><a></a>    </span>
<span id="cb6-17"><a></a>    <span class="co"># Example 1: Using the built-in distance matrix (4 cities)</span></span>
<span id="cb6-18"><a></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">1Ô∏è‚É£  Using built-in distance matrix:"</span>)</span>
<span id="cb6-19"><a></a>    cities <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb6-20"><a></a>    </span>
<span id="cb6-21"><a></a>    start <span class="op">=</span> time.time()</span>
<span id="cb6-22"><a></a>    path, distance <span class="op">=</span> tsp_brute_force(cities)</span>
<span id="cb6-23"><a></a>    end <span class="op">=</span> time.time()</span>
<span id="cb6-24"><a></a>    </span>
<span id="cb6-25"><a></a>    <span class="bu">print</span>(<span class="ss">f"   Input: </span><span class="sc">{</span>cities<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-26"><a></a>    <span class="bu">print</span>(<span class="ss">f"   Best path: </span><span class="sc">{</span>path<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-27"><a></a>    <span class="bu">print</span>(<span class="ss">f"   Distance: </span><span class="sc">{</span>distance<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-28"><a></a>    <span class="bu">print</span>(<span class="ss">f"   Time: </span><span class="sc">{</span>end<span class="op">-</span>start<span class="sc">:.4f}</span><span class="ss">s"</span>)</span>
<span id="cb6-29"><a></a>    </span>
<span id="cb6-30"><a></a>    <span class="co"># Example 2: Custom coordinates with euclidean distance</span></span>
<span id="cb6-31"><a></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">2Ô∏è‚É£  Using custom city coordinates:"</span>)</span>
<span id="cb6-32"><a></a>    </span>
<span id="cb6-33"><a></a>    <span class="co"># Define your cities as (x, y) coordinates</span></span>
<span id="cb6-34"><a></a>    city_positions <span class="op">=</span> [(<span class="dv">0</span>, <span class="dv">0</span>), (<span class="dv">1</span>, <span class="dv">3</span>), (<span class="dv">4</span>, <span class="dv">1</span>), (<span class="dv">2</span>, <span class="dv">4</span>)]</span>
<span id="cb6-35"><a></a>    </span>
<span id="cb6-36"><a></a>    <span class="co"># Create a custom distance function</span></span>
<span id="cb6-37"><a></a>    <span class="kw">def</span> calculate_custom_distance(path):</span>
<span id="cb6-38"><a></a>        total <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb6-39"><a></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(path) <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb6-40"><a></a>            city1 <span class="op">=</span> city_positions[path[i]]</span>
<span id="cb6-41"><a></a>            city2 <span class="op">=</span> city_positions[path[i <span class="op">+</span> <span class="dv">1</span>]]</span>
<span id="cb6-42"><a></a>            total <span class="op">+=</span> euclidean_distance(city1, city2)</span>
<span id="cb6-43"><a></a>        <span class="cf">return</span> total</span>
<span id="cb6-44"><a></a>    </span>
<span id="cb6-45"><a></a>    <span class="co"># Temporarily replace the global function</span></span>
<span id="cb6-46"><a></a>    <span class="im">import</span> tsp</span>
<span id="cb6-47"><a></a>    original_calc <span class="op">=</span> tsp.calculate_distance</span>
<span id="cb6-48"><a></a>    tsp.calculate_distance <span class="op">=</span> calculate_custom_distance</span>
<span id="cb6-49"><a></a>    </span>
<span id="cb6-50"><a></a>    <span class="cf">try</span>:</span>
<span id="cb6-51"><a></a>        start <span class="op">=</span> time.time()</span>
<span id="cb6-52"><a></a>        path, distance <span class="op">=</span> tsp_brute_force(<span class="bu">list</span>(<span class="bu">range</span>(<span class="bu">len</span>(city_positions))))</span>
<span id="cb6-53"><a></a>        end <span class="op">=</span> time.time()</span>
<span id="cb6-54"><a></a>        </span>
<span id="cb6-55"><a></a>        <span class="bu">print</span>(<span class="ss">f"   Coordinates: </span><span class="sc">{</span>city_positions<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-56"><a></a>        <span class="bu">print</span>(<span class="ss">f"   Best path: </span><span class="sc">{</span>path<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-57"><a></a>        <span class="bu">print</span>(<span class="ss">f"   Distance: </span><span class="sc">{</span>distance<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb6-58"><a></a>        <span class="bu">print</span>(<span class="ss">f"   Time: </span><span class="sc">{</span>end<span class="op">-</span>start<span class="sc">:.4f}</span><span class="ss">s"</span>)</span>
<span id="cb6-59"><a></a>        </span>
<span id="cb6-60"><a></a>    <span class="cf">finally</span>:</span>
<span id="cb6-61"><a></a>        <span class="co"># Restore original function</span></span>
<span id="cb6-62"><a></a>        tsp.calculate_distance <span class="op">=</span> original_calc</span>
<span id="cb6-63"><a></a>    </span>
<span id="cb6-64"><a></a>    <span class="co"># Example 3: Timing comparison</span></span>
<span id="cb6-65"><a></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">3Ô∏è‚É£  Performance for different city counts:"</span>)</span>
<span id="cb6-66"><a></a>    <span class="cf">for</span> n <span class="kw">in</span> [<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>]:</span>
<span id="cb6-67"><a></a>        cities <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(n))</span>
<span id="cb6-68"><a></a>        start <span class="op">=</span> time.time()</span>
<span id="cb6-69"><a></a>        path, distance <span class="op">=</span> tsp_brute_force(cities)</span>
<span id="cb6-70"><a></a>        end <span class="op">=</span> time.time()</span>
<span id="cb6-71"><a></a>        </span>
<span id="cb6-72"><a></a>        <span class="im">import</span> math</span>
<span id="cb6-73"><a></a>        routes <span class="op">=</span> math.factorial(n<span class="op">-</span><span class="dv">1</span>) <span class="cf">if</span> n <span class="op">&gt;</span> <span class="dv">1</span> <span class="cf">else</span> <span class="dv">1</span></span>
<span id="cb6-74"><a></a>        </span>
<span id="cb6-75"><a></a>        <span class="bu">print</span>(<span class="ss">f"   </span><span class="sc">{</span>n<span class="sc">}</span><span class="ss"> cities: </span><span class="sc">{</span>routes<span class="sc">:&gt;6}</span><span class="ss"> routes, </span><span class="sc">{</span>end<span class="op">-</span>start<span class="sc">:.4f}</span><span class="ss">s"</span>)</span>
<span id="cb6-76"><a></a>        </span>
<span id="cb6-77"><a></a>        <span class="cf">if</span> end <span class="op">-</span> start <span class="op">&gt;</span> <span class="fl">0.1</span>:  <span class="co"># Stop if getting slow</span></span>
<span id="cb6-78"><a></a>            <span class="bu">print</span>(<span class="st">"   (stopping - getting slow)"</span>)</span>
<span id="cb6-79"><a></a>            <span class="cf">break</span></span>
<span id="cb6-80"><a></a></span>
<span id="cb6-81"><a></a></span>
<span id="cb6-82"><a></a><span class="kw">def</span> solve_custom_problem():</span>
<span id="cb6-83"><a></a>    <span class="co">"""Example of solving a specific TSP problem"""</span></span>
<span id="cb6-84"><a></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">üéØ Solving a specific problem:"</span>)</span>
<span id="cb6-85"><a></a>    <span class="bu">print</span>(<span class="st">"   Visiting 5 offices in a city"</span>)</span>
<span id="cb6-86"><a></a>    </span>
<span id="cb6-87"><a></a>    <span class="co"># Office locations (in km from city center)</span></span>
<span id="cb6-88"><a></a>    offices <span class="op">=</span> {</span>
<span id="cb6-89"><a></a>        <span class="st">'HQ'</span>: (<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb6-90"><a></a>        <span class="st">'Branch A'</span>: (<span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb6-91"><a></a>        <span class="st">'Branch B'</span>: (<span class="dv">5</span>, <span class="dv">1</span>),</span>
<span id="cb6-92"><a></a>        <span class="st">'Branch C'</span>: (<span class="dv">1</span>, <span class="dv">4</span>),</span>
<span id="cb6-93"><a></a>        <span class="st">'Branch D'</span>: (<span class="dv">4</span>, <span class="dv">4</span>)</span>
<span id="cb6-94"><a></a>    }</span>
<span id="cb6-95"><a></a>    </span>
<span id="cb6-96"><a></a>    office_names <span class="op">=</span> <span class="bu">list</span>(offices.keys())</span>
<span id="cb6-97"><a></a>    coordinates <span class="op">=</span> <span class="bu">list</span>(offices.values())</span>
<span id="cb6-98"><a></a>    </span>
<span id="cb6-99"><a></a>    <span class="bu">print</span>(<span class="ss">f"   Offices: </span><span class="sc">{</span>office_names<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-100"><a></a>    </span>
<span id="cb6-101"><a></a>    <span class="co"># Create distance calculation function</span></span>
<span id="cb6-102"><a></a>    <span class="kw">def</span> office_distance(path):</span>
<span id="cb6-103"><a></a>        total <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb6-104"><a></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(path) <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb6-105"><a></a>            pos1 <span class="op">=</span> coordinates[path[i]]</span>
<span id="cb6-106"><a></a>            pos2 <span class="op">=</span> coordinates[path[i <span class="op">+</span> <span class="dv">1</span>]]</span>
<span id="cb6-107"><a></a>            total <span class="op">+=</span> euclidean_distance(pos1, pos2)</span>
<span id="cb6-108"><a></a>        <span class="cf">return</span> total</span>
<span id="cb6-109"><a></a>    </span>
<span id="cb6-110"><a></a>    <span class="co"># Solve the problem</span></span>
<span id="cb6-111"><a></a>    <span class="im">import</span> tsp</span>
<span id="cb6-112"><a></a>    original_calc <span class="op">=</span> tsp.calculate_distance</span>
<span id="cb6-113"><a></a>    tsp.calculate_distance <span class="op">=</span> office_distance</span>
<span id="cb6-114"><a></a>    </span>
<span id="cb6-115"><a></a>    <span class="cf">try</span>:</span>
<span id="cb6-116"><a></a>        start <span class="op">=</span> time.time()</span>
<span id="cb6-117"><a></a>        path, distance <span class="op">=</span> tsp_brute_force(<span class="bu">list</span>(<span class="bu">range</span>(<span class="bu">len</span>(offices))))</span>
<span id="cb6-118"><a></a>        end <span class="op">=</span> time.time()</span>
<span id="cb6-119"><a></a>        </span>
<span id="cb6-120"><a></a>        <span class="co"># Convert indices back to office names</span></span>
<span id="cb6-121"><a></a>        route_names <span class="op">=</span> [office_names[i] <span class="cf">for</span> i <span class="kw">in</span> path]</span>
<span id="cb6-122"><a></a>        </span>
<span id="cb6-123"><a></a>        <span class="bu">print</span>(<span class="ss">f"   Best route: </span><span class="sc">{</span><span class="st">' ‚Üí '</span><span class="sc">.</span>join(route_names)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-124"><a></a>        <span class="bu">print</span>(<span class="ss">f"   Total distance: </span><span class="sc">{</span>distance<span class="sc">:.2f}</span><span class="ss"> km"</span>)</span>
<span id="cb6-125"><a></a>        <span class="bu">print</span>(<span class="ss">f"   Solve time: </span><span class="sc">{</span>end<span class="op">-</span>start<span class="sc">:.4f}</span><span class="ss"> seconds"</span>)</span>
<span id="cb6-126"><a></a>        </span>
<span id="cb6-127"><a></a>    <span class="cf">finally</span>:</span>
<span id="cb6-128"><a></a>        tsp.calculate_distance <span class="op">=</span> original_calc</span>
<span id="cb6-129"><a></a></span>
<span id="cb6-130"><a></a></span>
<span id="cb6-131"><a></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb6-132"><a></a>    example_usage()</span>
<span id="cb6-133"><a></a>    solve_custom_problem()</span>
<span id="cb6-134"><a></a>    </span>
<span id="cb6-135"><a></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">‚ú® Want more examples? Run 'python3 main.py' for interactive mode!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="project-file-3-main.py" class="slide level2">
<h2>Project File 3: main.py</h2>
<div class="callout callout-none no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p><strong>main.py</strong> - Main interactive driver</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a></a><span class="co">#!/usr/bin/env python3</span></span>
<span id="cb7-2"><a></a><span class="co">"""</span></span>
<span id="cb7-3"><a></a><span class="co">Main driver for the Travelling Salesman Problem (TSP) solver</span></span>
<span id="cb7-4"><a></a><span class="co">Demonstrates brute force TSP algorithm with various test cases</span></span>
<span id="cb7-5"><a></a><span class="co">"""</span></span>
<span id="cb7-6"><a></a></span>
<span id="cb7-7"><a></a><span class="im">import</span> time</span>
<span id="cb7-8"><a></a><span class="im">from</span> tsp <span class="im">import</span> tsp_brute_force, calculate_distance, euclidean_distance</span>
<span id="cb7-9"><a></a></span>
<span id="cb7-10"><a></a></span>
<span id="cb7-11"><a></a><span class="kw">def</span> print_header(title):</span>
<span id="cb7-12"><a></a>    <span class="co">"""Print a formatted header for output sections"""</span></span>
<span id="cb7-13"><a></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span><span class="op">*</span><span class="dv">60</span>)</span>
<span id="cb7-14"><a></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>title<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-15"><a></a>    <span class="bu">print</span>(<span class="st">"="</span><span class="op">*</span><span class="dv">60</span>)</span>
<span id="cb7-16"><a></a></span>
<span id="cb7-17"><a></a></span>
<span id="cb7-18"><a></a><span class="kw">def</span> print_result(path, distance, execution_time):</span>
<span id="cb7-19"><a></a>    <span class="co">"""Print formatted TSP solution results"""</span></span>
<span id="cb7-20"><a></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Best Path: </span><span class="sc">{</span><span class="st">' ‚Üí '</span><span class="sc">.</span>join(<span class="bu">map</span>(<span class="bu">str</span>, path))<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-21"><a></a>    <span class="bu">print</span>(<span class="ss">f"Total Distance: </span><span class="sc">{</span>distance<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-22"><a></a>    <span class="bu">print</span>(<span class="ss">f"Execution Time: </span><span class="sc">{</span>execution_time<span class="sc">:.4f}</span><span class="ss"> seconds"</span>)</span>
<span id="cb7-23"><a></a></span>
<span id="cb7-24"><a></a></span>
<span id="cb7-25"><a></a><span class="kw">def</span> example_1_simple():</span>
<span id="cb7-26"><a></a>    <span class="co">"""Example 1: Simple 4-city TSP with predefined distance matrix"""</span></span>
<span id="cb7-27"><a></a>    print_header(<span class="st">"Example 1: Simple 4-City TSP"</span>)</span>
<span id="cb7-28"><a></a>    </span>
<span id="cb7-29"><a></a>    <span class="bu">print</span>(<span class="st">"Cities: 0, 1, 2, 3"</span>)</span>
<span id="cb7-30"><a></a>    <span class="bu">print</span>(<span class="st">"Using predefined distance matrix in tsp.py"</span>)</span>
<span id="cb7-31"><a></a>    </span>
<span id="cb7-32"><a></a>    <span class="co"># Create city list (just indices for this example)</span></span>
<span id="cb7-33"><a></a>    cities <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">4</span>))</span>
<span id="cb7-34"><a></a>    </span>
<span id="cb7-35"><a></a>    <span class="co"># Time the execution</span></span>
<span id="cb7-36"><a></a>    start_time <span class="op">=</span> time.time()</span>
<span id="cb7-37"><a></a>    best_path, best_distance <span class="op">=</span> tsp_brute_force(cities)</span>
<span id="cb7-38"><a></a>    end_time <span class="op">=</span> time.time()</span>
<span id="cb7-39"><a></a>    </span>
<span id="cb7-40"><a></a>    print_result(best_path, best_distance, end_time <span class="op">-</span> start_time)</span>
<span id="cb7-41"><a></a></span>
<span id="cb7-42"><a></a></span>
<span id="cb7-43"><a></a><span class="kw">def</span> calculate_euclidean_distance_matrix(cities):</span>
<span id="cb7-44"><a></a>    <span class="co">"""Calculate distance matrix using Euclidean distances"""</span></span>
<span id="cb7-45"><a></a>    n <span class="op">=</span> <span class="bu">len</span>(cities)</span>
<span id="cb7-46"><a></a>    distances <span class="op">=</span> {}</span>
<span id="cb7-47"><a></a>    </span>
<span id="cb7-48"><a></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb7-49"><a></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb7-50"><a></a>            <span class="cf">if</span> i <span class="op">==</span> j:</span>
<span id="cb7-51"><a></a>                distances[(i, j)] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb7-52"><a></a>            <span class="cf">else</span>:</span>
<span id="cb7-53"><a></a>                dist <span class="op">=</span> euclidean_distance(cities[i], cities[j])</span>
<span id="cb7-54"><a></a>                distances[(i, j)] <span class="op">=</span> dist</span>
<span id="cb7-55"><a></a>    </span>
<span id="cb7-56"><a></a>    <span class="cf">return</span> distances</span>
<span id="cb7-57"><a></a></span>
<span id="cb7-58"><a></a></span>
<span id="cb7-59"><a></a><span class="kw">def</span> tsp_with_coordinates(cities):</span>
<span id="cb7-60"><a></a>    <span class="co">"""</span></span>
<span id="cb7-61"><a></a><span class="co">    Modified TSP solver that uses coordinate-based distances</span></span>
<span id="cb7-62"><a></a><span class="co">    """</span></span>
<span id="cb7-63"><a></a>    <span class="kw">def</span> calculate_coord_distance(path):</span>
<span id="cb7-64"><a></a>        <span class="co">"""Calculate total route distance using coordinates"""</span></span>
<span id="cb7-65"><a></a>        distances <span class="op">=</span> calculate_euclidean_distance_matrix(cities)</span>
<span id="cb7-66"><a></a>        </span>
<span id="cb7-67"><a></a>        total <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb7-68"><a></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(path) <span class="op">-</span> <span class="dv">1</span>):</span>
<span id="cb7-69"><a></a>            current <span class="op">=</span> path[i]</span>
<span id="cb7-70"><a></a>            next_city <span class="op">=</span> path[i <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb7-71"><a></a>            total <span class="op">+=</span> distances[(current, next_city)]</span>
<span id="cb7-72"><a></a>        </span>
<span id="cb7-73"><a></a>        <span class="cf">return</span> total</span>
<span id="cb7-74"><a></a>    </span>
<span id="cb7-75"><a></a>    <span class="co"># Temporarily replace the global calculate_distance function</span></span>
<span id="cb7-76"><a></a>    <span class="kw">global</span> calculate_distance</span>
<span id="cb7-77"><a></a>    original_calc <span class="op">=</span> calculate_distance</span>
<span id="cb7-78"><a></a>    calculate_distance <span class="op">=</span> calculate_coord_distance</span>
<span id="cb7-79"><a></a>    </span>
<span id="cb7-80"><a></a>    <span class="cf">try</span>:</span>
<span id="cb7-81"><a></a>        result <span class="op">=</span> tsp_brute_force(<span class="bu">list</span>(<span class="bu">range</span>(<span class="bu">len</span>(cities))))</span>
<span id="cb7-82"><a></a>        <span class="cf">return</span> result</span>
<span id="cb7-83"><a></a>    <span class="cf">finally</span>:</span>
<span id="cb7-84"><a></a>        <span class="co"># Restore original function</span></span>
<span id="cb7-85"><a></a>        calculate_distance <span class="op">=</span> original_calc</span>
<span id="cb7-86"><a></a></span>
<span id="cb7-87"><a></a></span>
<span id="cb7-88"><a></a><span class="kw">def</span> example_2_coordinates():</span>
<span id="cb7-89"><a></a>    <span class="co">"""Example 2: TSP with actual city coordinates"""</span></span>
<span id="cb7-90"><a></a>    print_header(<span class="st">"Example 2: TSP with City Coordinates"</span>)</span>
<span id="cb7-91"><a></a>    </span>
<span id="cb7-92"><a></a>    <span class="co"># Define cities with (x, y) coordinates</span></span>
<span id="cb7-93"><a></a>    city_coords <span class="op">=</span> {</span>
<span id="cb7-94"><a></a>        <span class="dv">0</span>: (<span class="dv">0</span>, <span class="dv">0</span>),    <span class="co"># City A</span></span>
<span id="cb7-95"><a></a>        <span class="dv">1</span>: (<span class="dv">3</span>, <span class="dv">4</span>),    <span class="co"># City B  </span></span>
<span id="cb7-96"><a></a>        <span class="dv">2</span>: (<span class="dv">6</span>, <span class="dv">1</span>),    <span class="co"># City C</span></span>
<span id="cb7-97"><a></a>        <span class="dv">3</span>: (<span class="dv">2</span>, <span class="dv">6</span>)     <span class="co"># City D</span></span>
<span id="cb7-98"><a></a>    }</span>
<span id="cb7-99"><a></a>    </span>
<span id="cb7-100"><a></a>    cities <span class="op">=</span> <span class="bu">list</span>(city_coords.values())</span>
<span id="cb7-101"><a></a>    </span>
<span id="cb7-102"><a></a>    <span class="bu">print</span>(<span class="st">"Cities with coordinates:"</span>)</span>
<span id="cb7-103"><a></a>    <span class="cf">for</span> i, (x, y) <span class="kw">in</span> <span class="bu">enumerate</span>(cities):</span>
<span id="cb7-104"><a></a>        <span class="bu">print</span>(<span class="ss">f"  City </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">: (</span><span class="sc">{</span>x<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>y<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb7-105"><a></a>    </span>
<span id="cb7-106"><a></a>    <span class="co"># Display distance matrix</span></span>
<span id="cb7-107"><a></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Distance Matrix:"</span>)</span>
<span id="cb7-108"><a></a>    distances <span class="op">=</span> calculate_euclidean_distance_matrix(cities)</span>
<span id="cb7-109"><a></a>    <span class="bu">print</span>(<span class="st">"     "</span>, end<span class="op">=</span><span class="st">""</span>)</span>
<span id="cb7-110"><a></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(cities)):</span>
<span id="cb7-111"><a></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>j<span class="sc">:8}</span><span class="ss">"</span>, end<span class="op">=</span><span class="st">""</span>)</span>
<span id="cb7-112"><a></a>    <span class="bu">print</span>()</span>
<span id="cb7-113"><a></a>    </span>
<span id="cb7-114"><a></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(cities)):</span>
<span id="cb7-115"><a></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">:3}</span><span class="ss">: "</span>, end<span class="op">=</span><span class="st">""</span>)</span>
<span id="cb7-116"><a></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(cities)):</span>
<span id="cb7-117"><a></a>            <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>distances[(i,j)]<span class="sc">:8.2f}</span><span class="ss">"</span>, end<span class="op">=</span><span class="st">""</span>)</span>
<span id="cb7-118"><a></a>        <span class="bu">print</span>()</span>
<span id="cb7-119"><a></a>    </span>
<span id="cb7-120"><a></a>    <span class="co"># Solve TSP</span></span>
<span id="cb7-121"><a></a>    start_time <span class="op">=</span> time.time()</span>
<span id="cb7-122"><a></a>    best_path, best_distance <span class="op">=</span> tsp_with_coordinates(cities)</span>
<span id="cb7-123"><a></a>    end_time <span class="op">=</span> time.time()</span>
<span id="cb7-124"><a></a>    </span>
<span id="cb7-125"><a></a>    print_result(best_path, best_distance, end_time <span class="op">-</span> start_time)</span>
<span id="cb7-126"><a></a></span>
<span id="cb7-127"><a></a></span>
<span id="cb7-128"><a></a><span class="kw">def</span> example_3_performance():</span>
<span id="cb7-129"><a></a>    <span class="co">"""Example 3: Performance comparison with different city counts"""</span></span>
<span id="cb7-130"><a></a>    print_header(<span class="st">"Example 3: Performance Analysis"</span>)</span>
<span id="cb7-131"><a></a>    </span>
<span id="cb7-132"><a></a>    <span class="bu">print</span>(<span class="st">"Analyzing TSP performance for different numbers of cities..."</span>)</span>
<span id="cb7-133"><a></a>    <span class="bu">print</span>(<span class="st">"Note: Time complexity is O(n!) - grows VERY quickly!"</span>)</span>
<span id="cb7-134"><a></a>    </span>
<span id="cb7-135"><a></a>    <span class="cf">for</span> n_cities <span class="kw">in</span> [<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]:</span>
<span id="cb7-136"><a></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">--- </span><span class="sc">{</span>n_cities<span class="sc">}</span><span class="ss"> Cities ---"</span>)</span>
<span id="cb7-137"><a></a>        </span>
<span id="cb7-138"><a></a>        <span class="co"># Create simple city list</span></span>
<span id="cb7-139"><a></a>        cities <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(n_cities))</span>
<span id="cb7-140"><a></a>        </span>
<span id="cb7-141"><a></a>        <span class="co"># Time the execution</span></span>
<span id="cb7-142"><a></a>        start_time <span class="op">=</span> time.time()</span>
<span id="cb7-143"><a></a>        best_path, best_distance <span class="op">=</span> tsp_brute_force(cities)</span>
<span id="cb7-144"><a></a>        end_time <span class="op">=</span> time.time()</span>
<span id="cb7-145"><a></a>        </span>
<span id="cb7-146"><a></a>        execution_time <span class="op">=</span> end_time <span class="op">-</span> start_time</span>
<span id="cb7-147"><a></a>        </span>
<span id="cb7-148"><a></a>        <span class="co"># Calculate theoretical number of permutations</span></span>
<span id="cb7-149"><a></a>        <span class="im">import</span> math</span>
<span id="cb7-150"><a></a>        permutations <span class="op">=</span> math.factorial(n_cities <span class="op">-</span> <span class="dv">1</span>)  <span class="co"># (n-1)! since we fix starting city</span></span>
<span id="cb7-151"><a></a>        </span>
<span id="cb7-152"><a></a>        <span class="bu">print</span>(<span class="ss">f"Possible routes: </span><span class="sc">{</span>permutations<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-153"><a></a>        <span class="bu">print</span>(<span class="ss">f"Best path: </span><span class="sc">{</span><span class="st">' ‚Üí '</span><span class="sc">.</span>join(<span class="bu">map</span>(<span class="bu">str</span>, best_path))<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-154"><a></a>        <span class="bu">print</span>(<span class="ss">f"Distance: </span><span class="sc">{</span>best_distance<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-155"><a></a>        <span class="bu">print</span>(<span class="ss">f"Time: </span><span class="sc">{</span>execution_time<span class="sc">:.4f}</span><span class="ss"> seconds"</span>)</span>
<span id="cb7-156"><a></a>        </span>
<span id="cb7-157"><a></a>        <span class="cf">if</span> n_cities <span class="op">&gt;=</span> <span class="dv">6</span>:</span>
<span id="cb7-158"><a></a>            <span class="bu">print</span>(<span class="st">"Warning: 7+ cities will take significantly longer!"</span>)</span>
<span id="cb7-159"><a></a></span>
<span id="cb7-160"><a></a></span>
<span id="cb7-161"><a></a><span class="kw">def</span> interactive_mode():</span>
<span id="cb7-162"><a></a>    <span class="co">"""Interactive mode for custom TSP problems"""</span></span>
<span id="cb7-163"><a></a>    print_header(<span class="st">"Interactive TSP Solver"</span>)</span>
<span id="cb7-164"><a></a>    </span>
<span id="cb7-165"><a></a>    <span class="cf">try</span>:</span>
<span id="cb7-166"><a></a>        n_cities <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">How many cities? (recommended: 3-6): "</span>))</span>
<span id="cb7-167"><a></a>        </span>
<span id="cb7-168"><a></a>        <span class="cf">if</span> n_cities <span class="op">&gt;</span> <span class="dv">8</span>:</span>
<span id="cb7-169"><a></a>            response <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Warning: This may take a very long time. Continue? (y/n): "</span>)</span>
<span id="cb7-170"><a></a>            <span class="cf">if</span> response.lower() <span class="op">!=</span> <span class="st">'y'</span>:</span>
<span id="cb7-171"><a></a>                <span class="cf">return</span></span>
<span id="cb7-172"><a></a>        </span>
<span id="cb7-173"><a></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Enter coordinates for </span><span class="sc">{</span>n_cities<span class="sc">}</span><span class="ss"> cities:"</span>)</span>
<span id="cb7-174"><a></a>        cities <span class="op">=</span> []</span>
<span id="cb7-175"><a></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n_cities):</span>
<span id="cb7-176"><a></a>            <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb7-177"><a></a>                <span class="cf">try</span>:</span>
<span id="cb7-178"><a></a>                    coords <span class="op">=</span> <span class="bu">input</span>(<span class="ss">f"City </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> (x,y): "</span>).split(<span class="st">','</span>)</span>
<span id="cb7-179"><a></a>                    x, y <span class="op">=</span> <span class="bu">float</span>(coords[<span class="dv">0</span>].strip()), <span class="bu">float</span>(coords[<span class="dv">1</span>].strip())</span>
<span id="cb7-180"><a></a>                    cities.append((x, y))</span>
<span id="cb7-181"><a></a>                    <span class="cf">break</span></span>
<span id="cb7-182"><a></a>                <span class="cf">except</span> (<span class="pp">ValueError</span>, <span class="pp">IndexError</span>):</span>
<span id="cb7-183"><a></a>                    <span class="bu">print</span>(<span class="st">"Please enter coordinates as: x,y (e.g., 1.5,2.0)"</span>)</span>
<span id="cb7-184"><a></a>        </span>
<span id="cb7-185"><a></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Solving TSP for </span><span class="sc">{</span>n_cities<span class="sc">}</span><span class="ss"> cities..."</span>)</span>
<span id="cb7-186"><a></a>        start_time <span class="op">=</span> time.time()</span>
<span id="cb7-187"><a></a>        best_path, best_distance <span class="op">=</span> tsp_with_coordinates(cities)</span>
<span id="cb7-188"><a></a>        end_time <span class="op">=</span> time.time()</span>
<span id="cb7-189"><a></a>        </span>
<span id="cb7-190"><a></a>        print_result(best_path, best_distance, end_time <span class="op">-</span> start_time)</span>
<span id="cb7-191"><a></a>        </span>
<span id="cb7-192"><a></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb7-193"><a></a>        <span class="bu">print</span>(<span class="st">"Invalid input. Please enter a number."</span>)</span>
<span id="cb7-194"><a></a>    <span class="cf">except</span> <span class="pp">KeyboardInterrupt</span>:</span>
<span id="cb7-195"><a></a>        <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Operation cancelled."</span>)</span>
<span id="cb7-196"><a></a></span>
<span id="cb7-197"><a></a></span>
<span id="cb7-198"><a></a><span class="kw">def</span> main():</span>
<span id="cb7-199"><a></a>    <span class="co">"""Main driver function"""</span></span>
<span id="cb7-200"><a></a>    print_header(<span class="st">"Travelling Salesman Problem (TSP) Solver"</span>)</span>
<span id="cb7-201"><a></a>    <span class="bu">print</span>(<span class="st">"Demonstrating brute force algorithm"</span>)</span>
<span id="cb7-202"><a></a>    <span class="bu">print</span>(<span class="st">"Author: CS101 Course"</span>)</span>
<span id="cb7-203"><a></a>    </span>
<span id="cb7-204"><a></a>    <span class="co"># Run examples</span></span>
<span id="cb7-205"><a></a>    example_1_simple()</span>
<span id="cb7-206"><a></a>    example_2_coordinates()</span>
<span id="cb7-207"><a></a>    example_3_performance()</span>
<span id="cb7-208"><a></a>    </span>
<span id="cb7-209"><a></a>    <span class="co"># Interactive mode</span></span>
<span id="cb7-210"><a></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb7-211"><a></a>        <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"-"</span><span class="op">*</span><span class="dv">40</span>)</span>
<span id="cb7-212"><a></a>        <span class="bu">print</span>(<span class="st">"Options:"</span>)</span>
<span id="cb7-213"><a></a>        <span class="bu">print</span>(<span class="st">"1. Run interactive TSP solver"</span>)</span>
<span id="cb7-214"><a></a>        <span class="bu">print</span>(<span class="st">"2. Exit"</span>)</span>
<span id="cb7-215"><a></a>        </span>
<span id="cb7-216"><a></a>        <span class="cf">try</span>:</span>
<span id="cb7-217"><a></a>            choice <span class="op">=</span> <span class="bu">input</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Enter your choice (1-2): "</span>).strip()</span>
<span id="cb7-218"><a></a>            </span>
<span id="cb7-219"><a></a>            <span class="cf">if</span> choice <span class="op">==</span> <span class="st">'1'</span>:</span>
<span id="cb7-220"><a></a>                interactive_mode()</span>
<span id="cb7-221"><a></a>            <span class="cf">elif</span> choice <span class="op">==</span> <span class="st">'2'</span>:</span>
<span id="cb7-222"><a></a>                <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Thank you for using the TSP solver!"</span>)</span>
<span id="cb7-223"><a></a>                <span class="cf">break</span></span>
<span id="cb7-224"><a></a>            <span class="cf">else</span>:</span>
<span id="cb7-225"><a></a>                <span class="bu">print</span>(<span class="st">"Please enter 1 or 2."</span>)</span>
<span id="cb7-226"><a></a>                </span>
<span id="cb7-227"><a></a>        <span class="cf">except</span> <span class="pp">KeyboardInterrupt</span>:</span>
<span id="cb7-228"><a></a>            <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n\n</span><span class="st">Goodbye!"</span>)</span>
<span id="cb7-229"><a></a>            <span class="cf">break</span></span>
<span id="cb7-230"><a></a></span>
<span id="cb7-231"><a></a></span>
<span id="cb7-232"><a></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb7-233"><a></a>    main()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="sample-output" class="slide level2">
<h2>Sample Output</h2>
<div class="callout callout-none no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p>Running <code>python3 examples.py</code></p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource text number-lines code-with-copy"><code class="sourceCode"><span id="cb8-1"><a></a>üîß TSP Solver - Usage Example</span>
<span id="cb8-2"><a></a>========================================</span>
<span id="cb8-3"><a></a></span>
<span id="cb8-4"><a></a>1Ô∏è‚É£  Using built-in distance matrix:</span>
<span id="cb8-5"><a></a>   Input: [0, 1, 2, 3]</span>
<span id="cb8-6"><a></a>   Best path: [0, 1, 2, 3, 0]</span>
<span id="cb8-7"><a></a>   Distance: 90</span>
<span id="cb8-8"><a></a>   Time: 0.0001s</span>
<span id="cb8-9"><a></a></span>
<span id="cb8-10"><a></a>2Ô∏è‚É£  Using custom city coordinates:</span>
<span id="cb8-11"><a></a>   Coordinates: [(0, 0), (1, 3), (4, 1), (2, 4)]</span>
<span id="cb8-12"><a></a>   Best path: [0, 1, 3, 2, 0]</span>
<span id="cb8-13"><a></a>   Distance: 12.31</span>
<span id="cb8-14"><a></a>   Time: 0.0001s</span>
<span id="cb8-15"><a></a></span>
<span id="cb8-16"><a></a>3Ô∏è‚É£  Performance for different city counts:</span>
<span id="cb8-17"><a></a>   3 cities:      2 routes, 0.0000s</span>
<span id="cb8-18"><a></a>   4 cities:      6 routes, 0.0000s</span>
<span id="cb8-19"><a></a>   5 cities:     24 routes, 0.0001s</span>
<span id="cb8-20"><a></a>   6 cities:    120 routes, 0.0007s</span>
<span id="cb8-21"><a></a>   7 cities:    720 routes, 0.0041s</span>
<span id="cb8-22"><a></a></span>
<span id="cb8-23"><a></a>üéØ Solving a specific problem:</span>
<span id="cb8-24"><a></a>   Visiting 5 offices in a city</span>
<span id="cb8-25"><a></a>   Offices: ['HQ', 'Branch A', 'Branch B', 'Branch C', 'Branch D']</span>
<span id="cb8-26"><a></a>   Best route: HQ ‚Üí Branch B ‚Üí Branch D ‚Üí Branch A ‚Üí Branch C ‚Üí HQ</span>
<span id="cb8-27"><a></a>   Total distance: 16.03 km</span>
<span id="cb8-28"><a></a>   Solve time: 0.0001 seconds</span>
<span id="cb8-29"><a></a></span>
<span id="cb8-30"><a></a>‚ú® Want more examples? Run 'python3 main.py' for interactive mode!</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tsp-is-everywhere" class="slide level2">
<h2>TSP is Everywhere! üåç</h2>
<!-- ::: {.callout-note icon="true"} -->
<!-- ## TSP is Everywhere! üåç -->
<p>The Travelling Salesman Problem appears in countless real-world scenarios, often disguised as other optimization challenges.</p>
<!-- ::: -->
<div class="columns">
<div class="column">
<p><strong>Logistics &amp; Transportation</strong> üöõ</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a></a><span class="co"># Delivery route optimization</span></span>
<span id="cb9-2"><a></a>delivery_stops <span class="op">=</span> [</span>
<span id="cb9-3"><a></a>    <span class="st">"Warehouse"</span>,      <span class="co"># Start/end point</span></span>
<span id="cb9-4"><a></a>    <span class="st">"123 Main St"</span>,    <span class="co"># Customer 1</span></span>
<span id="cb9-5"><a></a>    <span class="st">"456 Oak Ave"</span>,    <span class="co"># Customer 2  </span></span>
<span id="cb9-6"><a></a>    <span class="st">"789 Pine Rd"</span>,    <span class="co"># Customer 3</span></span>
<span id="cb9-7"><a></a>    <span class="st">"321 Elm St"</span>      <span class="co"># Customer 4</span></span>
<span id="cb9-8"><a></a>]</span>
<span id="cb9-9"><a></a></span>
<span id="cb9-10"><a></a><span class="co"># TSP finds shortest route visiting all stops</span></span>
<span id="cb9-11"><a></a>optimal_route <span class="op">=</span> tsp_solver(delivery_stops)</span>
<span id="cb9-12"><a></a><span class="bu">print</span>(<span class="ss">f"Optimal delivery route: </span><span class="sc">{</span>optimal_route<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb9-13"><a></a></span>
<span id="cb9-14"><a></a><span class="co"># Real impact:</span></span>
<span id="cb9-15"><a></a><span class="co"># - UPS saves $50M+ annually with route optimization</span></span>
<span id="cb9-16"><a></a><span class="co"># - FedEx reduces fuel consumption by 10%</span></span>
<span id="cb9-17"><a></a><span class="co"># - Amazon uses TSP for same-day delivery</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>School Bus Routing</strong> üöå * Visit all bus stops efficiently * Minimize travel time for students * Reduce fuel costs and emissions</p>
</div><div class="column">
<p><strong>Manufacturing &amp; Technology</strong> üîß</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a></a><span class="co"># Circuit board drilling optimization</span></span>
<span id="cb10-2"><a></a>drill_points <span class="op">=</span> [</span>
<span id="cb10-3"><a></a>    (<span class="dv">10</span>, <span class="dv">20</span>),   <span class="co"># Hole 1 coordinates</span></span>
<span id="cb10-4"><a></a>    (<span class="dv">30</span>, <span class="dv">15</span>),   <span class="co"># Hole 2 coordinates</span></span>
<span id="cb10-5"><a></a>    (<span class="dv">25</span>, <span class="dv">35</span>),   <span class="co"># Hole 3 coordinates</span></span>
<span id="cb10-6"><a></a>    (<span class="dv">40</span>, <span class="dv">25</span>)    <span class="co"># Hole 4 coordinates</span></span>
<span id="cb10-7"><a></a>]</span>
<span id="cb10-8"><a></a></span>
<span id="cb10-9"><a></a><span class="co"># TSP minimizes drill head movement</span></span>
<span id="cb10-10"><a></a>optimal_drilling <span class="op">=</span> tsp_solver(drill_points)</span>
<span id="cb10-11"><a></a><span class="co"># Result: Faster manufacturing, less wear on equipment</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>DNA Sequencing</strong> üß¨ * Arrange genetic fragments in correct order * Minimize overlapping regions * Critical for medical research</p>
<p><strong>Video Game AI</strong> üéÆ * NPCs planning efficient patrol routes * Resource gathering optimization * Strategy game unit movement</p>
</div></div>
</section>
<section id="tsp-environmental-impacts-the-green-side-of-tsp" class="slide level2">
<h2>TSP Environmental Impacts: The Green Side of TSP</h2>
<!-- ::: {.callout-important icon="true"}
## Think Deeper: Environmental Consequences üåç

**Work in groups of 3-4. Discuss how TSP optimization affects our planet and environment.**

::: -->
<div class="callout callout-none no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<!-- ## Discussion Points: The Green Side of TSP -->
<p><strong>1. Positive Environmental Effects</strong> ‚úÖ - TSP optimization reduces fuel consumption and lowers emissions - Decreases overall traffic congestion - Minimizes unnecessary vehicle miles traveled</p>
<p><strong>2. The Consumption Paradox</strong> ‚ö†Ô∏è - Does efficient delivery encourage more online shopping? - Could TSP optimization actually <em>increase</em> total environmental impact? - Are we solving the right problem or enabling overconsumption?</p>
<p><strong>3. Future Transportation Challenges</strong> üîã - How should TSP algorithms adapt for electric delivery vehicles? - What about charging station stops and battery range limits? - How do we optimize for renewable energy usage timing?</p>
</div>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Think: What is an Eco-Friendly TSP Design</strong></p>
</div>
<div class="callout-content">
<p><strong>If you could design a TSP system, what factors besides distance would you optimize for?</strong></p>
<p>Consider these green factors: - Carbon footprint per route segment - Real-time traffic patterns to reduce idling - Air quality levels in different neighborhoods - Time-of-day energy grid efficiency</p>
<p><strong>Research Task</strong>: Find one company using TSP for environmental benefits. What measurable impact have they achieved?</p>
</div>
</div>
</div>
<!-- 
## TSP Social & Economic Impacts


::: {.callout-warning icon="true"}
## Discussion Points: The Human Side of Optimization

**1. Job Market Impact** üíº
- Does TSP optimization help delivery drivers (less driving, more efficient work)?
- Or does it hurt them (fewer drivers needed for same workload)?
- How do we balance efficiency with employment?

**2. Geographic Equity & Access** üèòÔ∏è
- Efficient routing makes fast delivery profitable in dense suburban areas
- What happens to rural communities or low-income neighborhoods?
- Are some areas systematically left behind by optimization algorithms?

**3. Small Business Competition** üè™
- How can local businesses compete with Amazon's TSP-optimized delivery?
- Is this technological advantage creating unfair market competition?
- What support do smaller companies need to stay competitive?

:::

::: {.callout-tip icon="true"}
## Ethical Dilemma: Competing Priorities

**A TSP algorithm could optimize for different goals:**

- üõ£Ô∏è **Shortest distance** (saves fuel, reduces costs)
- üö¶ **Avoiding traffic** (faster delivery, customer satisfaction)  
- ‚öñÔ∏è **Serving all neighborhoods equally** (social equity, fairness)

**Group Challenge**: Which should be the priority? Can you design a system that balances all three? What trade-offs would you accept?

**Future Thinking**: How might drone deliveries change TSP optimization? What new ethical questions would this technology raise?

::: -->
</section>
<section id="summary-tsp---the-beautiful-impossible-problem" class="slide level2">
<h2>Summary: TSP - The Beautiful Impossible Problem</h2>
<p><strong>The Travelling Salesman Problem</strong> teaches us about the beauty and challenges of computer science! üéØ</p>
<div class="columns">
<div class="column">
<p><strong>What We Now Know</strong> üß†üìö</p>
<ul>
<li>üó∫Ô∏è <strong>Real-world relevance</strong>: TSP is everywhere</li>
<li>üìà <strong>Computational complexity</strong>: Problems grow!<br>
</li>
<li>üß† <strong>Creative solutions</strong>: When brute force fails, get creative</li>
<li>üí∞ <strong>Economic impact</strong>: Good algorithms save energy</li>
<li>üåç <strong>Environmental benefits</strong>: Efficiency is good <!-- - ‚öñÔ∏è **Ethical considerations**: Technology choices have consequences --></li>
</ul>
</div><div class="column">
<p><strong>What We Also Know!</strong> üß†üåü</p>
<ul>
<li><strong>The Big Lesson</strong>: Sometimes ‚Äúgood enough‚Äù solutions (heuristics) are better than perfect solutions that take forever! üß†</li>
<li><strong>Brute_force</strong>: ‚ÄúTry everything - works for small problems‚Äù,</li>
<li><strong>Heuristics</strong>: ‚ÄúUse smart shortcuts - good for most cases‚Äù,</li>
<li><strong>Approximation</strong>: ‚ÄúGet close to optimal - practical for real world‚Äù,</li>
<li><strong>Machine_learning</strong>: ‚ÄúLearn from patterns to solve problems - modern AI approach‚Äù</li>
</ul>
</div></div>
</section>
<section id="and-also-good-to-know-too" class="slide level2">
<h2>And, Also Good to Know Too!</h2>
<!-- ::: {.columns} -->
<!-- ::: {.column} -->
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p><strong>Remember</strong>: ü§î</p>
<ul>
<li>Not all problems have efficient exact solutions</li>
<li>Creativity beats raw computational power</li>
<li>Real-world constraints matter more than textbook perfection</li>
<li>Technology should serve people and planet</li>
</ul>
</div>
</div>
</div>
<!-- ::: -->
<!-- ::: {.column} -->
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p><strong>Questions to Explore:</strong>üåü</p>
<ul>
<li>How do we know when a ‚Äúgood enough‚Äù solution is actually good enough?</li>
<li>What happens when we combine multiple optimization techniques?</li>
<li>How is AI changing the way we solve impossible problems?</li>
</ul>
</div>
</div>
</div>
<!-- ::: -->
<!-- ::: -->
<!-- **Real-World Applications:**
* Social media friend suggestions
* GPS navigation systems  
* Recommendation algorithms
* Scientific research optimization -->
<script>
/**
 * Interactive Travelling Salesman Problem Visualizer
 * Demonstrates the complexity and real-world applications of the TSP
 * Shows how route optimization affects both computation time and practical results
 */
class TSPVisualizer {
    constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        if (!this.canvas) return;
        
        this.ctx = this.canvas.getContext('2d');
        this.cities = [];
        this.bestRoute = [];
        this.bestDistance = Infinity;
        this.isComputing = false;
        this.animationFrame = null;
        
        // Mouse tracking for interactive placement
        this.mouseX = -1;
        this.mouseY = -1;
        this.showPreview = false;
        
        // Visual styling
        this.cityRadius = 8;
        this.cityColors = {
            normal: '#3498DB',
            start: '#E74C3C',
            hover: '#F39C12'
        };
        this.routeColor = '#2ECC71';
        this.bestRouteColor = '#E74C3C';
        
        this.setupEventListeners();
        this.loadDemoData();
        this.draw();
    }
    
    setupEventListeners() {
        // Button event listeners
        const addCityBtn = document.getElementById('add-city-btn');
        const solveTSPBtn = document.getElementById('solve-tsp-btn');
        const resetTSPBtn = document.getElementById('reset-tsp-btn');
        const demoPresetBtn = document.getElementById('demo-preset-btn');
        
        if (addCityBtn) addCityBtn.addEventListener('click', () => this.addRandomCity());
        if (solveTSPBtn) solveTSPBtn.addEventListener('click', () => this.solveTSP());
        if (resetTSPBtn) resetTSPBtn.addEventListener('click', () => this.resetCities());
        if (demoPresetBtn) demoPresetBtn.addEventListener('click', () => this.loadDemoData());
        
        // Canvas interactive events
        if (this.canvas) {
            this.canvas.addEventListener('click', (e) => this.handleCanvasClick(e));
            this.canvas.addEventListener('mousemove', (e) => this.handleMouseMove(e));
            this.canvas.addEventListener('mouseenter', (e) => this.handleMouseEnter(e));
            this.canvas.addEventListener('mouseleave', (e) => this.handleMouseLeave(e));
        }
    }
    
    handleCanvasClick(event) {
        if (this.isComputing) return;
        
        const rect = this.canvas.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        
        // Check if click is too close to existing city
        const tooClose = this.cities.some(city => {
            const distance = Math.sqrt((city.x - x)**2 + (city.y - y)**2);
            return distance < this.cityRadius * 3; // Minimum spacing
        });
        
        if (!tooClose) {
            this.addCity(x, y);
            // Visual feedback for successful placement
            this.showPlacementFeedback(x, y);
        } else {
            // Visual feedback for failed placement
            this.showErrorFeedback(x, y);
        }
    }
    
    handleMouseMove(event) {
        if (this.isComputing) return;
        
        const rect = this.canvas.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        
        // Show preview of where city would be placed
        this.mouseX = x;
        this.mouseY = y;
        this.showPreview = true;
        this.draw();
    }
    
    handleMouseEnter(event) {
        if (!this.isComputing) {
            this.canvas.style.cursor = 'crosshair';
            this.showPreview = true;
        }
    }
    
    handleMouseLeave(event) {
        this.canvas.style.cursor = 'default';
        this.showPreview = false;
        this.draw();
    }
    
    addCity(x, y) {
        // Ensure city is within canvas bounds with padding
        x = Math.max(this.cityRadius, Math.min(this.canvas.width - this.cityRadius, x));
        y = Math.max(this.cityRadius, Math.min(this.canvas.height - this.cityRadius, y));
        
        this.cities.push({x, y, id: this.cities.length});
        this.updateInfo();
        this.draw();
    }
    
    showPlacementFeedback(x, y) {
        // Brief green flash to show successful city placement
        const originalCtx = this.ctx;
        setTimeout(() => {
            originalCtx.save();
            originalCtx.fillStyle = 'rgba(46, 204, 113, 0.5)';
            originalCtx.beginPath();
            originalCtx.arc(x, y, this.cityRadius * 2, 0, 2 * Math.PI);
            originalCtx.fill();
            originalCtx.restore();
            
            setTimeout(() => this.draw(), 200);
        }, 50);
    }
    
    showErrorFeedback(x, y) {
        // Brief red flash to show failed placement (too close to existing city)
        const originalCtx = this.ctx;
        setTimeout(() => {
            originalCtx.save();
            originalCtx.fillStyle = 'rgba(231, 76, 60, 0.5)';
            originalCtx.beginPath();
            originalCtx.arc(x, y, this.cityRadius * 2, 0, 2 * Math.PI);
            originalCtx.fill();
            originalCtx.restore();
            
            setTimeout(() => this.draw(), 200);
        }, 50);
    }
    
    addRandomCity() {
        const padding = this.cityRadius * 2;
        const x = padding + Math.random() * (this.canvas.width - 2 * padding);
        const y = padding + Math.random() * (this.canvas.height - 2 * padding);
        this.addCity(x, y);
    }
    
    loadDemoData() {
        this.cities = [
            {x: 100, y: 150, id: 0},
            {x: 300, y: 100, id: 1},
            {x: 500, y: 200, id: 2},
            {x: 400, y: 300, id: 3},
            {x: 200, y: 250, id: 4},
            {x: 600, y: 150, id: 5}
        ];
        this.bestRoute = [];
        this.bestDistance = Infinity;
        this.updateInfo();
        this.draw();
    }
    
    resetCities() {
        this.cities = [];
        this.bestRoute = [];
        this.bestDistance = Infinity;
        this.showPreview = false;
        this.mouseX = -1;
        this.mouseY = -1;
        this.updateInfo();
        this.draw();
    }
    
    calculateDistance(city1, city2) {
        const dx = city1.x - city2.x;
        const dy = city1.y - city2.y;
        return Math.sqrt(dx * dx + dy * dy);
    }
    
    calculateRouteDistance(route) {
        if (route.length < 2) return 0;
        
        let totalDistance = 0;
        for (let i = 0; i < route.length - 1; i++) {
            totalDistance += this.calculateDistance(this.cities[route[i]], this.cities[route[i + 1]]);
        }
        // Add return to start
        totalDistance += this.calculateDistance(this.cities[route[route.length - 1]], this.cities[route[0]]);
        return totalDistance;
    }
    
    // Factorial calculation for route counting
    factorial(n) {
        if (n <= 1) return 1;
        let result = 1;
        for (let i = 2; i <= n; i++) {
            result *= i;
        }
        return result;
    }
    
    // Generate all permutations for brute force TSP
    generatePermutations(arr) {
        if (arr.length <= 1) return [arr];
        
        const result = [];
        for (let i = 0; i < arr.length; i++) {
            const current = arr[i];
            const remaining = arr.slice(0, i).concat(arr.slice(i + 1));
            const permutations = this.generatePermutations(remaining);
            
            for (const perm of permutations) {
                result.push([current, ...perm]);
            }
        }
        return result;
    }
    
    async solveTSP() {
        if (this.cities.length < 3) {
            this.updateResult('Need at least 3 cities to solve TSP!', '0ms');
            return;
        }
        
        if (this.cities.length > 10) {
            const shouldContinue = confirm(
                `‚ö†Ô∏è Warning: ${this.cities.length} cities will generate ${this.factorial(this.cities.length - 1) / 2} routes to check.\n\n` +
                `This might take a very long time or crash your browser!\n\n` +
                `Continue anyway? (Recommended: Use 8 or fewer cities for demo)`
            );
            if (!shouldContinue) return;
        }
        
        this.isComputing = true;
        const startTime = performance.now();
        
        // Update UI to show computing state
        this.updateResult('Computing optimal route...', 'Computing...');
        
        try {
            // For demonstration, we'll use a simpler approach for larger sets
            let bestRoute, bestDistance;
            
            if (this.cities.length <= 8) {
                // Brute force for small sets
                [bestRoute, bestDistance] = await this.bruteForceTSP();
            } else {
                // Nearest neighbor heuristic for larger sets
                [bestRoute, bestDistance] = await this.nearestNeighborTSP();
            }
            
            const endTime = performance.now();
            const computationTime = endTime - startTime;
            
            this.bestRoute = bestRoute;
            this.bestDistance = bestDistance;
            
            this.updateResult(
                `${bestDistance.toFixed(1)} pixels`, 
                `${computationTime.toFixed(1)}ms`
            );
            
            this.draw();
            
        } catch (error) {
            console.error('TSP computation error:', error);
            this.updateResult('Computation failed - too complex!', 'Error');
        }
        
        this.isComputing = false;
    }
    
    async bruteForceTSP() {
        const n = this.cities.length;
        if (n === 0) return [[], 0];
        
        // Fix first city as starting point (reduces permutations by factor of n)
        const otherCities = [];
        for (let i = 1; i < n; i++) {
            otherCities.push(i);
        }
        
        const permutations = this.generatePermutations(otherCities);
        let bestRoute = null;
        let bestDistance = Infinity;
        
        // Check each permutation
        for (const perm of permutations) {
            const route = [0, ...perm]; // Start with city 0
            const distance = this.calculateRouteDistance(route);
            
            if (distance < bestDistance) {
                bestDistance = distance;
                bestRoute = [...route];
            }
            
            // Allow browser to stay responsive
            if (permutations.indexOf(perm) % 100 === 0) {
                await new Promise(resolve => setTimeout(resolve, 1));
            }
        }
        
        return [bestRoute, bestDistance];
    }
    
    async nearestNeighborTSP() {
        // Greedy nearest neighbor heuristic - much faster but not optimal
        const n = this.cities.length;
        const visited = new Set([0]); // Start at city 0
        const route = [0];
        let currentCity = 0;
        let totalDistance = 0;
        
        while (route.length < n) {
            let nearestCity = -1;
            let nearestDistance = Infinity;
            
            // Find nearest unvisited city
            for (let i = 0; i < n; i++) {
                if (!visited.has(i)) {
                    const distance = this.calculateDistance(this.cities[currentCity], this.cities[i]);
                    if (distance < nearestDistance) {
                        nearestDistance = distance;
                        nearestCity = i;
                    }
                }
            }
            
            // Move to nearest city
            route.push(nearestCity);
            visited.add(nearestCity);
            totalDistance += nearestDistance;
            currentCity = nearestCity;
        }
        
        // Add return to start
        totalDistance += this.calculateDistance(this.cities[currentCity], this.cities[0]);
        
        return [route, totalDistance];
    }
    
    updateInfo() {
        const cityCountElement = document.getElementById('city-count');
        const routeCountElement = document.getElementById('route-count');
        const complexityWarningElement = document.getElementById('complexity-warning');
        
        const cityCount = this.cities.length;
        let routeCount = 0;
        let warningText = '';
        
        if (cityCount >= 2) {
            // For TSP: (n-1)!/2 unique routes (fixing start city and accounting for direction)
            routeCount = this.factorial(cityCount - 1);
            if (cityCount > 2) routeCount = Math.floor(routeCount / 2);
        }
        
        // Generate appropriate warnings
        if (cityCount <= 3) {
            warningText = 'Perfect for learning! Try adding more cities.';
        } else if (cityCount <= 6) {
            warningText = 'Good demonstration size - manageable computation.';
        } else if (cityCount <= 8) {
            warningText = 'Getting complex - notice the computation time increase!';
        } else if (cityCount <= 10) {
            warningText = '‚ö†Ô∏è High complexity - will take several seconds to solve.';
        } else {
            warningText = 'üö® EXTREME complexity - may crash browser or take minutes!';
        }
        
        if (cityCountElement) cityCountElement.textContent = cityCount;
        if (routeCountElement) {
            if (routeCount > 1000000) {
                routeCountElement.textContent = `${(routeCount / 1000000).toFixed(1)}M`;
            } else if (routeCount > 1000) {
                routeCountElement.textContent = `${(routeCount / 1000).toFixed(1)}K`;
            } else {
                routeCountElement.textContent = routeCount.toLocaleString();
            }
        }
        if (complexityWarningElement) complexityWarningElement.textContent = warningText;
    }
    
    updateResult(distance, time) {
        const distanceElement = document.getElementById('best-distance');
        const timeElement = document.getElementById('computation-time');
        
        if (distanceElement) distanceElement.textContent = distance;
        if (timeElement) timeElement.textContent = time;
    }
    
    draw() {
        // Clear canvas
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        
        // Draw grid for reference
        this.drawGrid();
        
        // Draw best route if available
        if (this.bestRoute.length > 0) {
            this.drawRoute(this.bestRoute, this.bestRouteColor, 3);
        }
        
        // Draw cities
        this.drawCities();
        
        // Draw city labels
        this.drawCityLabels();
        
        // Draw placement preview
        if (this.showPreview && !this.isComputing) {
            this.drawPlacementPreview();
        }
    }
    
    drawGrid() {
        this.ctx.strokeStyle = '#ECF0F1';
        this.ctx.lineWidth = 1;
        
        // Vertical lines
        for (let x = 0; x <= this.canvas.width; x += 50) {
            this.ctx.beginPath();
            this.ctx.moveTo(x, 0);
            this.ctx.lineTo(x, this.canvas.height);
            this.ctx.stroke();
        }
        
        // Horizontal lines
        for (let y = 0; y <= this.canvas.height; y += 50) {
            this.ctx.beginPath();
            this.ctx.moveTo(0, y);
            this.ctx.lineTo(this.canvas.width, y);
            this.ctx.stroke();
        }
    }
    
    drawRoute(route, color, lineWidth = 2) {
        if (route.length < 2) return;
        
        this.ctx.strokeStyle = color;
        this.ctx.lineWidth = lineWidth;
        this.ctx.beginPath();
        
        // Draw path through cities
        const startCity = this.cities[route[0]];
        this.ctx.moveTo(startCity.x, startCity.y);
        
        for (let i = 1; i < route.length; i++) {
            const city = this.cities[route[i]];
            this.ctx.lineTo(city.x, city.y);
        }
        
        // Return to start
        this.ctx.lineTo(startCity.x, startCity.y);
        this.ctx.stroke();
        
        // Draw direction arrows
        this.drawRouteArrows(route, color);
    }
    
    drawRouteArrows(route, color) {
        this.ctx.fillStyle = color;
        
        for (let i = 0; i < route.length; i++) {
            const currentCity = this.cities[route[i]];
            const nextCity = this.cities[route[(i + 1) % route.length]];
            
            // Calculate arrow position (midpoint of segment)
            const midX = (currentCity.x + nextCity.x) / 2;
            const midY = (currentCity.y + nextCity.y) / 2;
            
            // Calculate angle
            const angle = Math.atan2(nextCity.y - currentCity.y, nextCity.x - currentCity.x);
            
            // Draw small arrow
            this.ctx.save();
            this.ctx.translate(midX, midY);
            this.ctx.rotate(angle);
            
            this.ctx.beginPath();
            this.ctx.moveTo(0, 0);
            this.ctx.lineTo(-8, -4);
            this.ctx.lineTo(-8, 4);
            this.ctx.closePath();
            this.ctx.fill();
            
            this.ctx.restore();
        }
    }
    
    drawCities() {
        this.cities.forEach((city, index) => {
            // Different color for starting city
            const color = index === 0 ? this.cityColors.start : this.cityColors.normal;
            
            this.ctx.fillStyle = color;
            this.ctx.beginPath();
            this.ctx.arc(city.x, city.y, this.cityRadius, 0, 2 * Math.PI);
            this.ctx.fill();
            
            // White border
            this.ctx.strokeStyle = 'white';
            this.ctx.lineWidth = 2;
            this.ctx.stroke();
        });
    }
    
    drawCityLabels() {
        this.ctx.fillStyle = 'white';
        this.ctx.font = 'bold 12px Arial';
        this.ctx.textAlign = 'center';
        this.ctx.textBaseline = 'middle';
        
        this.cities.forEach((city, index) => {
            this.ctx.fillText(index.toString(), city.x, city.y);
        });
    }
    
    drawPlacementPreview() {
        if (this.mouseX < 0 || this.mouseY < 0) return;
        
        // Check if placement would be valid (not too close to existing cities)
        const tooClose = this.cities.some(city => {
            const distance = Math.sqrt((city.x - this.mouseX)**2 + (city.y - this.mouseY)**2);
            return distance < this.cityRadius * 3;
        });
        
        // Draw preview circle
        this.ctx.save();
        
        if (tooClose) {
            // Red preview for invalid placement
            this.ctx.fillStyle = 'rgba(231, 76, 60, 0.4)';
            this.ctx.strokeStyle = 'rgba(231, 76, 60, 0.8)';
        } else {
            // Green preview for valid placement
            this.ctx.fillStyle = 'rgba(46, 204, 113, 0.4)';
            this.ctx.strokeStyle = 'rgba(46, 204, 113, 0.8)';
        }
        
        this.ctx.lineWidth = 2;
        this.ctx.setLineDash([5, 5]); // Dashed line for preview
        
        this.ctx.beginPath();
        this.ctx.arc(this.mouseX, this.mouseY, this.cityRadius, 0, 2 * Math.PI);
        this.ctx.fill();
        this.ctx.stroke();
        
        // Draw preview city number
        this.ctx.fillStyle = tooClose ? '#C0392B' : '#27AE60';
        this.ctx.font = 'bold 12px Arial';
        this.ctx.textAlign = 'center';
        this.ctx.textBaseline = 'middle';
        this.ctx.setLineDash([]); // Reset line dash
        
        if (!tooClose) {
            this.ctx.fillText(this.cities.length.toString(), this.mouseX, this.mouseY);
        } else {
            this.ctx.fillText('‚úó', this.mouseX, this.mouseY);
        }
        
        this.ctx.restore();
    }
}

// Initialize the TSP visualizer when the page loads
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(() => {
        new TSPVisualizer('tsp-canvas');
    }, 500);
});
</script>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1200,

        height: 800,

        // Factor of the display size that should remain empty around the content
        margin: 5.0e-2,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>